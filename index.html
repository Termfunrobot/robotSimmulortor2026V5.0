<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
    body { text-align:center; font-family:sans-serif; background:#cccccc; }
    #field { position:relative; width:1200px; height:600px; background:#eee; border:3px solid #000; margin: 0 auto; overflow: hidden;}
    .cell { position:absolute; width:150px; height:150px; box-sizing:border-box; border:1px solid #ccc; }
    .start-spot { position:absolute; width:140px; height:140px; background:#ff4d4d; z-index:0; }
    .green-spot { position:absolute; background:#7CFC00; border-radius:8px; z-index:1; }
    .wall-edge { position:absolute; background:#333; z-index:2; }
    .box { position:absolute; width:24px; height:24px; background:orange; border:2px solid #aa5500; border-radius:4px; z-index:4; transition: 0.1s; }
    #robot { width:60px; height:65px; background:linear-gradient(#1e90ff,#0b4fa3); border:2px solid #000; border-radius:8px; position:absolute; transform-origin:center; transition:0.2s; z-index:5; }
   
.head { position:absolute; top:0; left:50%; transform:translateX(-50%); width:50%; height:30px; background:#000; border-radius:5px; }



.wheel { 
    position: absolute; 
    width: 16px;        /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏¢‡∏û‡∏≤‡∏ô */
    height: 50px;       /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏™‡∏≤‡∏¢‡∏û‡∏≤‡∏ô‡∏£‡∏ñ‡∏ñ‡∏±‡∏á */
    background: repeating-linear-gradient(
        #111,           /* ‡∏™‡∏µ‡∏î‡∏≥ */
        #111 8px, 
        #333 5px,       /* ‡∏•‡∏≤‡∏¢‡∏ö‡∏≤‡∏Å‡∏™‡∏µ‡πÄ‡∏ó‡∏≤‡πÄ‡∏Ç‡πâ‡∏° */
        #333 10px
    ); 
    bottom: 5px; 
    border-radius: 3px;
    border: 1px solid #000;
}

.wheel.left { left: -10px; }  /* ‡∏Ç‡∏¢‡∏±‡∏ö‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏Ç‡πâ‡∏≤‡∏á‡πÜ ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
.wheel.right { right: -10px; }

.yellow-spot {
    position: absolute;
    width: 50px;
    height: 50px;
    background: #ffcc00; /* ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏° */
    border: 3px solid #000;
    border-radius: 50%; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏á‡∏Å‡∏•‡∏° */
    z-index: 1;
}


    @keyframes hitFlash { 0% { background:red; } 50% { background:#ff4444; } 100% { background:linear-gradient(#1e90ff,#0b4fa3); } }
    .hit { animation:hitFlash 0.3s; }
    textarea { width:600px; height:100px; font-size:16px; font-family: monospace; padding: 10px; }
    button { margin:3px; padding:8px 15px; cursor: pointer; }
    .side-panel { width:250px; text-align:left; background:#f5f5f5; padding:15px; border-radius:8px; border:2px solid #999; }
    .layout { display:flex; justify-content:center; gap:30px; margin-top:20px; }
    code { background: #eee; padding: 2px 4px; border-radius: 4px; font-weight: bold; }
</style>
</head>
<body>

<h2>SMR Robot simulator Arduino Edition ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á ‡∏™‡∏û‡∏ê .2026 </h2>

<button onclick="randomGreenCells()">‡∏™‡∏∏‡πà‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß (4 ‡∏à‡∏∏‡∏î)</button>
<button onclick="randomYellowSpot()">üü° ‡∏™‡∏∏‡πà‡∏°‡∏à‡∏∏‡∏î‡∏ß‡∏á‡∏Å‡∏•‡∏°</button>

<input type="number" id="wallPercent" value="25" min="10" max="50"> %
<button onclick="generateWalls()">‡∏™‡∏∏‡πà‡∏°‡∏Å‡∏≥‡πÅ‡∏û‡∏á</button>
<br><br>

<div>
    ‡∏•‡∏π‡∏Å‡∏ö‡∏≤‡∏®‡∏Å‡πå‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: <span id="ammoCount">4</span> | 
    ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="scoreText">0</span> |
    <small>SMR V3.0 (2026)</small>
</div>

<br>

<textarea id="commandInput">GO1();
GO1();
RR90();
GO1();
JY1();</textarea>
<br>
<button onclick="runCommands()" style="background: #28a745; color: white; border: none; font-size: 18px;">‚ñ∂ RUN CODE</button>
<button id="loopBtn" onclick="toggleLoop()" style="background: #17a2b8; color: white; border: none; font-size: 18px;">üîÑ START LOOP</button>


<button onclick="resetGame()" style="background: #007bff; color: white; border: none; font-size: 18px;">üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>


<div class="layout">
    <div id="field"></div>
    <div class="side-panel">
        <h3>üìò Arduino Commands</h3>
        <h3>üìò ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå </h3>
        <code>GO1();   </code>  ‚Üí ‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏ô‡πâ‡∏≤<br><br>
        <code>LL90();   </code> ‚Üí ‡∏´‡∏°‡∏∏‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ 90¬∞<br><br>
        <code>RR90();   </code> ‚Üí ‡∏´‡∏°‡∏∏‡∏ô‡∏Ç‡∏ß‡∏≤ 90¬∞<br><br>
        <code>BK();   </code>   ‚Üí ‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á<br><br>
        <code>JY1();   </code>  ‚Üí ‡∏à‡πà‡∏≤‡∏¢‡∏•‡∏π‡∏Å‡∏ö‡∏≤‡∏®‡∏Å‡πå‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤
<h3> 1)‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß  </h3>
<h3> 2)‡∏™‡∏∏‡πà‡∏°‡∏Å‡∏≥‡πÅ‡∏û‡∏á  </h3>
<h3> 3)‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á </h3>
<h3> 4)‡∏Å‡∏î‡∏£‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏±‡∏ô‡∏•‡∏π‡∏õ </h3>
<h3> 5)‡∏Å‡∏î‡∏£‡∏µ‡πÄ‡∏ã‡∏ï ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</h3>
    </div>
</div>

<script>
const field = document.getElementById("field");
let row=3, col=0, direction=0;
let wallEdges=[], greenCells=[], ammo=4, score=0, running=false, loopActive=false;

//‡∏™‡∏£‡πâ‡∏≤‡∏á Grid
for(let r=0;r<4;r++){
    for(let c=0;c<8;c++){
        let cell=document.createElement("div");
        cell.className="cell";
        cell.style.left=(c*150)+"px"; cell.style.top=(r*150)+"px";
        field.appendChild(cell);
    }
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
let startSpot = document.createElement("div");
startSpot.className = "start-spot";

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á‡∏ä‡πà‡∏≠‡∏á: (‡∏Ç‡∏ô‡∏≤‡∏î‡∏ä‡πà‡∏≠‡∏á 150 - ‡∏Ç‡∏ô‡∏≤‡∏î‡∏à‡∏∏‡∏î 30) / 2 = 60px
let offset = (150 - 140) / 2; 

startSpot.style.left = (0 * 150 + offset) + "px"; 
startSpot.style.top = (3 * 150 + offset) + "px";

field.appendChild(startSpot);



//‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå
const robot=document.createElement("div");
robot.id="robot";
robot.innerHTML='<div class="head"></div><div class="wheel left"></div><div class="wheel right"></div>';
field.appendChild(robot);

function updateRobot(){
    robot.style.left=(col*150+45)+"px";
    robot.style.top=(row*150+45)+"px";
    robot.style.transform="rotate("+direction+"deg)";
}

function resetGame(){
    row=3; col=0; direction=0; updateRobot();
    ammo=4; score=0; loopActive=false;
    document.getElementById("ammoCount").innerText=ammo;
    document.getElementById("scoreText").innerText=score;
    document.getElementById("loopBtn").innerText = "üîÑ START LOOP";
    document.getElementById("loopBtn").style.background = "#17a2b8";
    document.querySelectorAll(".box").forEach(b=>b.remove());
}







//////////////////////////////////

function randomGreenCells(){
    greenCells=[];
    document.querySelectorAll(".green-spot").forEach(g=>g.remove());
    
    // 1. ‡∏Ñ‡∏±‡∏î‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà "‡∏Ç‡∏≠‡∏ö‡∏™‡∏ô‡∏≤‡∏°"
    let edgeCells = [];
    for(let r=0; r<4; r++){
        for(let c=0; c<8; c++){
            if(r === 0 || r === 3 || c === 0 || c === 7){
                if(!(r === 3 && c === 0)) edgeCells.push({r: r, c: c});
            }
        }
    }

    // 2. ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 4 ‡∏à‡∏∏‡∏î
    while(greenCells.length < 4 && edgeCells.length > 0){
        let randomIndex = Math.floor(Math.random() * edgeCells.length);
        let selected = edgeCells.splice(randomIndex, 1)[0]; 
        let r = selected.r;
        let c = selected.c;

        let spot = document.createElement("div");
        spot.className = "green-spot";
        
        let leftPos = c * 150;
        let topPos = r * 150;
        let w, h;

        // 3. ‡∏ï‡∏£‡∏£‡∏Å‡∏∞‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏™‡∏ô‡∏≤‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡∏ô‡∏≤‡∏î 150x75 ‡∏´‡∏£‡∏∑‡∏≠ 75x150
        // ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡πÄ‡∏ä‡πá‡∏Å‡∏Ç‡∏≠‡∏ö ‡∏ö‡∏ô/‡∏•‡πà‡∏≤‡∏á ‡∏Å‡πà‡∏≠‡∏ô ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏∏‡∏°‡∏™‡∏ô‡∏≤‡∏°‡∏à‡∏∞‡πÄ‡∏ô‡πâ‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô
        if (r === 0) { // ‡∏Ç‡∏≠‡∏ö‡∏ö‡∏ô
            w = 150; h = 75;
            topPos = r * 150; 
        } 
        else if (r === 3) { // ‡∏Ç‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏á
            w = 150; h = 75;
            topPos = r * 150 + 75; 
        } 
        else if (c === 0) { // ‡∏Ç‡∏≠‡∏ö‡∏ã‡πâ‡∏≤‡∏¢ (‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏ñ‡∏ß 0,3)
            w = 75; h = 150;
            leftPos = c * 150; 
        } 
        else if (c === 7) { // ‡∏Ç‡∏≠‡∏ö‡∏Ç‡∏ß‡∏≤ (‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏ñ‡∏ß 0,3)
            w = 75; h = 150;
            leftPos = c * 150 + 75; 
        }

        spot.style.width = w + "px"; 
        spot.style.height = h + "px";
        spot.style.left = leftPos + "px";
        spot.style.top = topPos + "px";
        
        field.appendChild(spot);
        greenCells.push({row: r, col: c});
    }
}




//////////////////////////////////////////////////////////////

function generateWalls() {
    let percent = parseInt(document.getElementById("wallPercent").value) / 100;
    let isPathValid = false;
    let attempts = 0;

    while (!isPathValid && attempts < 100) {
        attempts++;
        document.querySelectorAll(".wall-edge").forEach(w => w.remove());
        wallEdges = [];

        // 1. ‡∏™‡∏∏‡πà‡∏°‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡∏ï‡∏±‡∏ß L ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡∏•‡∏î‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡πà‡∏á)
        for (let r = 0; r < 4; r++) {
            for (let c = 0; c < 8; c++) {
                if (Math.random() < percent) {
                    let lTypes = [["right", "bottom"], ["right", "top"], ["left", "bottom"], ["left", "top"]];
                    let chosenL = lTypes[Math.floor(Math.random() * lTypes.length)];
                    addWall(r, c, chosenL[0]);
                    addWall(r, c, chosenL[1]);
                }
            }
        }

  isPathValid = checkAllCellsReachable();


        // 2. ‚≠ê ‡∏™‡∏£‡πâ‡∏≤‡∏á "‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤" (Corridor) ‡∏Ç‡∏ô‡∏≤‡∏ö‡∏Ç‡πâ‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
        greenCells.forEach(gc => {
            // ‡πÄ‡∏ä‡πá‡∏Å‡∏ß‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡πÑ‡∏´‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡∏Ç‡∏ô‡∏≤‡∏ö‡∏Ç‡πâ‡∏≤‡∏á 2 ‡∏î‡πâ‡∏≤‡∏ô
            if (gc.row === 0 || gc.row === 3) { 
                // ‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏ö‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏•‡πà‡∏≤‡∏á -> ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≥‡πÅ‡∏û‡∏á ‡∏ã‡πâ‡∏≤‡∏¢-‡∏Ç‡∏ß‡∏≤)
                addWall(gc.row, gc.col, "left");
                addWall(gc.row, gc.col, "right");
            } 
            else if (gc.col === 0 || gc.col === 7) { 
                // ‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏ã‡πâ‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏ß‡∏≤ -> ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≥‡πÅ‡∏û‡∏á ‡∏ö‡∏ô-‡∏•‡πà‡∏≤‡∏á)
                addWall(gc.row, gc.col, "top");
                addWall(gc.row, gc.col, "bottom");
            }
        });

        // 3. ‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡∏Ç‡∏≠‡∏ö‡∏™‡∏ô‡∏≤‡∏° (‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ)
        for (let r = 0; r < 4; r++) { addWall(r, 0, "left"); addWall(r, 7, "right"); }
        for (let c = 0; c < 8; c++) { addWall(0, c, "top"); addWall(3, c, "bottom"); }
        
        // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ó‡∏≤‡∏á‡∏≠‡∏≠‡∏Å‡∏à‡∏∏‡∏î Start
        wallEdges = wallEdges.filter(w => !(w.row === 3 && w.col === 0 && w.side === "top"));

        // 4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    
    }
}











///////////////////////////////////////////////////////////////

function randomYellowSpot() {
    // 1. ‡∏•‡∏ö‡∏à‡∏∏‡∏î‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô
    document.querySelectorAll(".yellow-spot").forEach(y => y.remove());

    let count = 0;
    let attempts = 0;
    let selectedPositions = []; // ‡πÄ‡∏Å‡πá‡∏ö‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô‡πÄ‡∏≠‡∏á

    // 2. ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏ö 2 ‡∏à‡∏∏‡∏î ‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏à‡∏ô‡∏Ñ‡∏£‡∏ö 100 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
    while (count < 2 && attempts < 100) {
        attempts++;
        let yelR = Math.floor(Math.random() * 4);
        let yelC = Math.floor(Math.random() * 8);

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏´‡πâ‡∏≤‡∏°‡∏ó‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç
        const isStart = (yelR === 3 && yelC === 0);
        const isGreen = greenCells.some(gc => gc.row === yelR && gc.col === yelC);
        const isObstacle = document.querySelector(`.obstacle-block[style*="left: ${yelC * 150}px"][style*="top: ${yelR * 150}px"]`);
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ö‡∏Å‡∏±‡∏ö‡∏à‡∏∏‡∏î‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
        const isDuplicate = selectedPositions.some(p => p.r === yelR && p.c === yelC);

        if (!isStart && !isGreen && !isObstacle && !isDuplicate) {
            selectedPositions.push({r: yelR, c: yelC});
            
            let yellow = document.createElement("div");
            yellow.className = "yellow-spot";
            // ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á‡∏ä‡πà‡∏≠‡∏á (150-50)/2 = 50px
            yellow.style.left = (yelC * 150 + 50) + "px";
            yellow.style.top = (yelR * 150 + 50) + "px";
            
            // ‡∏ù‡∏±‡∏á‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÑ‡∏ß‡πâ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Å‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à
            yellow.dataset.row = yelR;
            yellow.dataset.col = yelC;
            
            field.appendChild(yellow);
            count++;
        }
    }
}

///////////////////////////////////////////////////
function checkAllCellsReachable() {
    let visited = new Set();
    let queue = [{ r: 3, c: 0 }]; // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∏‡∏î Start (3,0)
    visited.add("3,0");

    while (queue.length > 0) {
        let { r, c } = queue.shift();
        let directions = [
            { dr: -1, dc: 0, side: "top", opposite: "bottom" },
            { dr: 0, dc: 1, side: "right", opposite: "left" },
            { dr: 1, dc: 0, side: "bottom", opposite: "top" },
            { dr: 0, dc: -1, side: "left", opposite: "right" }
        ];

        for (let d of directions) {
            let nr = r + d.dr, nc = c + d.dc;
            let key = `${nr},${nc}`;
            
            // ‡πÄ‡∏ä‡πá‡∏Å‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏™‡∏ô‡∏≤‡∏° ‡πÅ‡∏•‡∏∞ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡πÑ‡∏õ
            if (nr >= 0 && nr < 4 && nc >= 0 && nc < 8 && !visited.has(key)) {
                // ‡πÄ‡∏ä‡πá‡∏Å‡∏ß‡πà‡∏≤‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡∏Å‡∏±‡πâ‡∏ô‡πÉ‡∏ô‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏õ ‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡∏™‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤
                if (!hasWall(r, c, d.side) && !hasWall(nr, nc, d.opposite)) {
                    // ‚≠ê ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°: ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡πà‡∏≠‡∏á‡∏î‡∏≥ (Obstacle)
                    const isObstacle = document.querySelector(`.obstacle-block[style*="left: ${nc * 150}px"][style*="top: ${nr * 150}px"]`);
                    if (!isObstacle) {
                        visited.add(key);
                        queue.push({ r: nr, c: nc });
                    }
                }
            }
        }
    }

    // ‚≠ê ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ "‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤" ‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏ó‡∏∏‡∏∏‡∏Å‡∏à‡∏∏‡∏î ‡∏ñ‡∏π‡∏Å visited ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    let allTargetsReachable = greenCells.every(gc => {
        // ‡∏´‡∏≤‡∏ß‡πà‡∏≤‡∏ó‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏à‡∏∏‡∏î‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏ä‡πà‡∏≠‡∏á‡πÑ‡∏´‡∏ô (‡∏õ‡∏Å‡∏ï‡∏¥‡∏Ñ‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡∏°‡∏±‡∏ô‡πÄ‡∏≠‡∏á ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤)
        // ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡∏Ç‡∏ô‡∏≤‡∏ö‡∏Ç‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡∏ñ‡πâ‡∏≤ visited ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á gc.row, gc.col 
        // ‡∏Å‡πá‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡∏ã‡∏≠‡∏á‡πÑ‡∏î‡πâ
        return visited.has(`${gc.row},${gc.col}`);
    });

    return allTargetsReachable; 
}

//////////////////////////////////////////////////








function addWall(r,c,side){
    let wall=document.createElement("div"); wall.className="wall-edge";
    if(side==="right"){ wall.style.width="6px"; wall.style.height="150px"; wall.style.left=(c*150+144)+"px"; wall.style.top=(r*150)+"px"; }
    if(side==="bottom"){ wall.style.width="150px"; wall.style.height="6px"; wall.style.left=(c*150)+"px"; wall.style.top=(r*150+144)+"px"; }
    if(side==="left"){ wall.style.width="6px"; wall.style.height="150px"; wall.style.left=(c*150)+"px"; wall.style.top=(r*150)+"px"; }
    if(side==="top"){ wall.style.width="150px"; wall.style.height="6px"; wall.style.left=(c*150)+"px"; wall.style.top=(r*150)+"px"; }
    field.appendChild(wall); wallEdges.push({row:r,col:c,side:side});
}

function hasWall(r,c,side){ return wallEdges.some(w=>w.row===r && w.col===c && w.side===side); }

function hitEffect(){
    try {
        let audio=new AudioContext(); let osc=audio.createOscillator();
        osc.type="square"; osc.frequency.setValueAtTime(150,audio.currentTime);
        osc.connect(audio.destination); osc.start(); osc.stop(audio.currentTime+0.2);
    } catch(e){}
    robot.classList.add("hit"); setTimeout(()=>robot.classList.remove("hit"),300);
}

function moveForward(){
    let nr=row, nc=col;
    if(direction===0){ if(hasWall(row,col,"top")) return hitEffect(); nr--; }
    if(direction===90){ if(hasWall(row,col,"right")) return hitEffect(); nc++; }
    if(direction===180){ if(hasWall(row,col,"bottom")) return hitEffect(); nr++; }
    if(direction===270){ if(hasWall(row,col,"left")) return hitEffect(); nc--; }
    if(nr<0||nr>=4||nc<0||nc>=8){ hitEffect(); return; }
    row=nr; col=nc; updateRobot();
}

function moveBackward(){ direction=(direction+180)%360; moveForward(); direction=(direction+180)%360; updateRobot(); }
function turnLeft(){ direction=(direction+270)%360; updateRobot(); }
function turnRight(){ direction=(direction+90)%360; updateRobot(); }



function dropBox(){
    if(ammo<=0){ return; }
    let tr=row, tc=col;
    if(direction===0) tr--; if(direction===90) tc++; if(direction===180) tr++; if(direction===270) tc--;
 
    
    let exists = Array.from(document.querySelectorAll(".box")).some(b => parseInt(b.dataset.row)===tr && parseInt(b.dataset.col)===tc);
    if(exists) return;

    let rx = col*150+45, ry = row*150+45, rs=60, bs=24, bx, by;
    if(direction===0){ bx=rx+(rs/2)-(bs/2); by=ry-bs; }
    else if(direction===90){ bx=rx+rs; by=ry+(rs/2)-(bs/2); }
    else if(direction===180){ bx=rx+(rs/2)-(bs/2); by=ry+rs; }
    else { bx=rx-bs; by=ry+(rs/2)-(bs/2); }

    let box=document.createElement("div");
    box.className="box"; box.style.left=bx+"px"; box.style.top=by+"px";
    box.dataset.row=tr; box.dataset.col=tc;
    field.appendChild(box);
    ammo--; document.getElementById("ammoCount").innerText=ammo;
}

// --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ---
function checkGreenScore() {
    score = 0;
    let allBoxes = document.querySelectorAll(".box");
    let allGreens = document.querySelectorAll(".green-spot");

    allBoxes.forEach(box => {
        let bRect = box.getBoundingClientRect(); // ‡∏î‡∏∂‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á Pixel ‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á
        let isOverlapping = false;

        allGreens.forEach(green => {
            let gRect = green.getBoundingClientRect(); // ‡∏î‡∏∂‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á Pixel ‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏™‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏ó‡∏±‡∏ö‡∏Å‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (AABB Collision)
            let overlap = !(bRect.right < gRect.left || 
                            bRect.left > gRect.right || 
                            bRect.bottom < gRect.top || 
                            bRect.top > gRect.bottom);

            if (overlap) {
                isOverlapping = true;
            }
        });

        if (isOverlapping) {
            score += 20;
            box.style.background = "#228B22";
        } else {
            box.style.background = "orange";
        }
    });

    document.getElementById("scoreText").innerText = score;
}



////////////////////////////
function checkYellowScore() {
    const robot = document.getElementById("robot");
    const yellowSpots = document.querySelectorAll(".yellow-spot");
    
    // ‡∏î‡∏∂‡∏á‡∏û‡∏¥‡∏Å‡∏±‡∏î (‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°) ‡∏Ç‡∏≠‡∏á‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏±‡πâ‡∏ô
    const rRect = robot.getBoundingClientRect();

    yellowSpots.forEach(spot => {
        if (spot.dataset.collected === "false") {
            // ‡∏î‡∏∂‡∏á‡∏û‡∏¥‡∏Å‡∏±‡∏î (‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°) ‡∏Ç‡∏≠‡∏á‡∏à‡∏∏‡∏î‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á
            const sRect = spot.getBoundingClientRect();

            // ‡∏ï‡∏£‡∏£‡∏Å‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏™‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏ó‡∏±‡∏ö‡∏Å‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            const isOverlapping = !(
                rRect.right < sRect.left || 
                rRect.left > sRect.right || 
                rRect.bottom < sRect.top || 
                rRect.top > sRect.bottom
            );

            if (isOverlapping) {
                score += 10;
                document.getElementById("scoreText").innerText = score;
                
                // ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏ï‡πâ‡∏°
                spot.dataset.collected = "true";
                spot.style.transform = "scale(1.5)"; // ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏≤‡∏¢‡πÑ‡∏õ
                spot.style.opacity = "0";
                setTimeout(() => spot.style.display = "none", 300);
                
                console.log("Collected! Current Score: " + score);
            }
        }
    });
}


///////////////////////////





async function runCommands(){
    if(running) return;
    running=true;
    let input = document.getElementById("commandInput").value.trim();
    let rawTokens = input.split(/[\s\n]+/); 

    for(let token of rawTokens){
        if(token === "" || !loopActive && !running) continue;
        let cmd = token.replace(/\(\);/i, "").toUpperCase();
        if(cmd==="GO1") moveForward(); else if(cmd==="BK") moveBackward();
        else if(cmd==="LL90") turnLeft(); else if(cmd==="RR90") turnRight();
        else if(cmd==="JY1") dropBox();
        checkGreenScore(); // ‡πÄ‡∏ä‡πá‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏Ç‡∏¢‡∏±‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏≤‡∏á‡∏ö‡∏•‡πá‡∏≠‡∏Å
        checkYellowScore(); // ‡πÄ‡∏ä‡πá‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ß‡∏¥‡πà‡∏á‡∏ú‡πà‡∏≤‡∏ô‡∏à‡∏∏‡∏î‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á (+10)
        await sleep(500);
    }
    running=false;
}


// --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏ß‡∏°‡∏Ñ‡∏∏‡∏° Loop ‡πÅ‡∏ö‡∏ö‡∏ß‡∏ô‡∏ã‡πâ‡∏≥‡πÑ‡∏°‡πà‡∏´‡∏¢‡∏∏‡∏î‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏™‡∏±‡πà‡∏á Stop ---
async function toggleLoop() {
    const btn = document.getElementById("loopBtn");
    
    if (!loopActive) {
        loopActive = true;
        btn.innerText = "üõë STOP LOOP";
        btn.style.background = "#dc3545";
        
        // ‡πÉ‡∏ä‡πâ while loop ‡∏Ñ‡∏£‡∏≠‡∏ö‡πÑ‡∏ß‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î
        while (loopActive) {
            // 1. ‡∏™‡∏±‡πà‡∏á‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏´‡∏∏‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà
            resetGame();
            // ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ loopActive ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô true ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ resetGame() ‡∏≠‡∏≤‡∏à‡πÑ‡∏õ‡∏™‡∏±‡πà‡∏á‡∏õ‡∏¥‡∏î‡∏°‡∏±‡∏ô
            loopActive = true; 
            btn.innerText = "üõë STOP LOOP";
            btn.style.background = "#dc3545";

            await sleep(500); // ‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏î‡∏¥‡∏ô

            // 2. ‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á (‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏à‡∏ô‡∏à‡∏ö)
            if (loopActive) {
                await runCommands(); 
            }

            // 3. ‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡∏´‡∏•‡∏±‡∏á‡∏à‡∏ö‡∏£‡∏≠‡∏ö ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ß‡∏ô‡πÑ‡∏õ Reset ‡πÉ‡∏´‡∏°‡πà
            await sleep(1000); 

            // ‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ä‡πá‡∏Å‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏î Stop ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏≠
            if (!loopActive) break;
        }
    } else {
        // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î Stop
        loopActive = false;
        btn.innerText = "üîÑ START LOOP";
        btn.style.background = "#17a2b8";
    }
}

// ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô resetGame ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î Loop
function resetGame(){
    row=3; col=0; direction=0; updateRobot();
    ammo=4; score=0;
    // loopActive = false; <-- ‡πÄ‡∏≠‡∏≤‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Loop ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ
    document.getElementById("ammoCount").innerText=ammo;
    document.getElementById("scoreText").innerText=score;
    document.querySelectorAll(".box").forEach(b=>b.remove());
}





function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }
updateRobot(); randomGreenCells(); generateWalls();
</script>
</body>
</html>